<html>
<head>
    <title>Title</title>
</head>
<body>
    <h1>토큰인증 처리하기</h1>
    <div>
        <input type="text" id="userId"><br>
        <input type="password" id="password">
        <button onclick="login()">로그인</button>
    </div>
<script>
    const login=()=>{
        const userId = document.querySelector("#userId").value;
        const password=document.querySelector("#password").value;
        fetch("http://localhost:9090/auth/login.do",{
            headers:{
                "Content-Type" : "application-json",
            },method:"POST",
            body:JSON.stringify({userId:userId,password:password})
        }).then(response=>{
            if (response.ok()) return response.json();
            else throw new Error("로그인 실패 ");
        }).then(data =>{
            console.log(data);
            sessionStorage.setItem("token",data.token);
        }).catch(e=>{
            alert(e);
        })
    }
</script>

</body>
</html>
